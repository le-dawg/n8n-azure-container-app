# ============================================================================
# Terraform Backend Configuration Example
# ============================================================================
#
# This file provides an example of how to configure the Azure Storage backend
# for Terraform state management.
#
# Usage:
#   1. Copy this file to backend.hcl (not tracked in git)
#   2. Update values with your actual storage account details
#   3. Run: terraform init -backend-config=backend.hcl
#
# IMPORTANT: Never commit backend.hcl with real values to git!
# ============================================================================

# Azure Storage Account for Terraform state
resource_group_name  = "tfstate-rg"                    # Resource group containing state storage
storage_account_name = "tfstate<RANDOM_STRING>"        # Must be globally unique, 3-24 chars
container_name       = "tfstate"                       # Container name for state files
key                  = "envs/dev/main.tfstate"        # State file path (change for stage/prod)

# Authentication
use_azuread_auth = true  # Use Azure AD authentication (recommended)

# For service principal authentication, use:
# use_azuread_auth = false
# And provide these via environment variables:
# - ARM_CLIENT_ID
# - ARM_CLIENT_SECRET
# - ARM_SUBSCRIPTION_ID
# - ARM_TENANT_ID

# ============================================================================
# How to create the backend storage account:
# ============================================================================
#
# RESOURCE_GROUP="tfstate-rg"
# STORAGE_ACCOUNT="tfstate$(openssl rand -hex 4)"
# CONTAINER_NAME="tfstate"
# LOCATION="northeurope"
#
# az group create --name $RESOURCE_GROUP --location $LOCATION
#
# az storage account create \
#   --name $STORAGE_ACCOUNT \
#   --resource-group $RESOURCE_GROUP \
#   --location $LOCATION \
#   --sku Standard_LRS \
#   --encryption-services blob
#
# az storage container create \
#   --name $CONTAINER_NAME \
#   --account-name $STORAGE_ACCOUNT
#
# echo "storage_account_name = \"$STORAGE_ACCOUNT\"" >> backend.hcl
#
# ============================================================================
# Multi-Environment Strategy:
# ============================================================================
#
# For different environments, change the 'key' parameter:
#
# Dev:   key = "envs/dev/main.tfstate"
# Stage: key = "envs/stage/main.tfstate"
# Prod:  key = "envs/prod/main.tfstate"
#
# Or use Terraform workspaces (not recommended for production)
#
# ============================================================================
